
-----------------------TABLA DE HOSPITALES

CREATE TABLE HOSPITALES(
HOSPID INT NOT NULL,
HOSPNOMBRE NVARCHAR (40),
HOSPDOMICILIO NVARCHAR (40),
HOSPTELEFONO INT
)
GO
SELECT*FROM HOSPITALES
------------------------ TABLA DE CONSULTORIO
GO

CREATE TABLE CONSULTORIO(
CONID INT NOT NULL,
CONDESCRIPCION NVARCHAR(40),
HOSPID INT
)
GO
SELECT*FROM CONSULTORIO
------------------------TABLA DE CITAS
GO

CREATE TABLE CITAS(
FOLIO INT NOT NULL,
FECHACAPTURA DATE,
FECHACITA DATE,
PESO INT,
PRESION INT,
ESTATURA DECIMAL,
SINTOMAS NVARCHAR (60),
DIAGNOSTICO NVARCHAR (40),
CONID INT,
DOCID INT,
PACID INT
)
GO
SELECT*FROM CITAS

-----------------------TABLA DE RECETAS
GO

CREATE TABLE RECETAS(
FOLIOREC INT NOT NULL,
RECFECHA DATE,
FOLIO INT
)
GO
SELECT*FROM RECETAS
---------------------TABLA DE MEDXRECETAS
GO

CREATE TABLE MEDXRECETAS(
FOLIOREC INT NOT NULL,
MEDID INT NOT NULL,
DOSIS INT,
CANTIDAD INT,
)
GO
SELECT*FROM MEDXRECETAS
--------------------TABLA DE DOCTORES
GO

CREATE TABLE DOCTORES(
DOCID INT NOT NULL,
DOCNOMBRE NVARCHAR (40),
DOCAPELLIDOS NVARCHAR (40),
DOCCELULAR INT ,
)
GO
SELECT*FROM DOCTORES
GO

-------------------TABLA DE PACIENTES
GO

CREATE TABLE PACIENTES(
PACID INT NOT NULL,
PACNOMBRE NVARCHAR(40),
PACAPELLIDOS NVARCHAR (40),
PACDOMICILIO NVARCHAR (40),
PACTELEFONO INT,
PACCORREO NVARCHAR (40)
)
GO
SELECT*FROM PACIENTES
-------------------TABLA DE MEDICAMENTOS
GO

CREATE TABLE MEDICAMENTOS(
MEDID INT NOT NULL,
MEDNOMBRE NVARCHAR (40),
MEDDESCRIPCION NVARCHAR (40),
MEDSUSACT NVARCHAR (40),
LABID INT
)
GO
SELECT*FROM MEDICAMENTOS
------------------TABLA ESPECIALIDADES
GO

CREATE TABLE ESPECIALIDADES(
ESPID INT NOT NULL,
ESPNOMBRE NVARCHAR (40)
)
GO
SELECT*FROM ESPECIALIDADES
------------------TABLA DE ESPXDOC
GO

CREATE TABLE ESPXDOC(
ESPID INT NOT NULL,
DOCID INT NOT NULL
)
GO
SELECT*FROM ESPXDOC
------------------TABLA DE LABORATORIOS
GO

CREATE TABLE LABORATORIOS(
LABID INT NOT NULL,
LABNOMBRE NVARCHAR (40),
LABDESCRIPCION NVARCHAR (40),
LABDOMICILIO NVARCHAR (40)
)
GO
SELECT*FROM LABORATORIOS
GO

----------------------PRIMARY KEYS
ALTER TABLE HOSPITALES ADD CONSTRAINT PK_HOSPITALES PRIMARY KEY( HOSPID )
GO
ALTER TABLE CONSULTORIO ADD CONSTRAINT PK_CONSULTORIO PRIMARY KEY( CONID )
GO
ALTER TABLE CITAS ADD CONSTRAINT PK_CITAS PRIMARY KEY( FOLIO )
GO
ALTER TABLE RECETAS ADD CONSTRAINT PK_RECETAS PRIMARY KEY( FOLIOREC )
GO
ALTER TABLE DOCTORES ADD CONSTRAINT PK_DOCTORES PRIMARY KEY( DOCID )
GO
ALTER TABLE PACIENTES ADD CONSTRAINT PK_PACIENTES PRIMARY KEY( PACID )
GO
ALTER TABLE MEDICAMENTOS ADD CONSTRAINT PK_MEDICAMENTOS PRIMARY KEY( MEDID )
GO
ALTER TABLE LABORATORIOS ADD CONSTRAINT PK_LABORATORIOS PRIMARY KEY( LABID )
GO
ALTER TABLE ESPECIALIDADES ADD CONSTRAINT PK_ESPECIALIDADES PRIMARY KEY( ESPID )
GO

----------------------FOREIG KEYS
ALTER TABLE CONSULTORIO ADD
CONSTRAINT FK_CONSULTORIO_HOSPITALES FOREIGN KEY( HOSPID ) REFERENCES HOSPITALES( HOSPID )
GO

ALTER TABLE CITAS ADD
CONSTRAINT FK_CITAS_PACIENTES FOREIGN KEY( PACID ) REFERENCES PACIENTES( PACID ),
CONSTRAINT FK_CITAS_DOCTORES FOREIGN KEY( DOCID ) REFERENCES DOCTORES( DOCID ),
CONSTRAINT FK_CITAS_CONSULTORIO FOREIGN KEY( CONID ) REFERENCES CONSULTORIO( CONID )

GO

ALTER TABLE MEDxRECETAS ADD
CONSTRAINT FK_MEDxREC_RECETAS FOREIGN KEY ( FOLIOREC ) REFERENCES RECETAS( FOLIOREC ),
CONSTRAINT FK_MEDxREC_MEDICAMENTOS FOREIGN KEY ( MEDID ) REFERENCES MEDICAMENTOS( MEDID )
GO

ALTER TABLE MEDICAMENTOS ADD
CONSTRAINT FK_MEDICAMENTOS_LABORATORIOS FOREIGN KEY( LABID ) REFERENCES LABORATORIOS( LABID )
GO

ALTER TABLE ESPxDOC ADD
CONSTRAINT FK_ESPxDOC_ESPECIALIDADES FOREIGN KEY( ESPID ) REFERENCES ESPECIALIDADES( ESPID ),
CONSTRAINT FK_ESPxDOC_DOCTORES FOREIGN KEY ( DOCID ) REFERENCES DOCTORES( DOCID )
GO

ALTER TABLE RECETAS ADD
CONSTRAINT FK_RECETAS_CITAS FOREIGN KEY( FOLIO ) REFERENCES CITAS( FOLIO )
GO

----------------------CREAR UNIQUE
ALTER TABLE PACIENTES ADD
CONSTRAINT UC_PACIENTES_TELEFONO UNIQUE( PACTELEFONO),
CONSTRAINT UC_PACIENTES_CORREO UNIQUE( PACCORREO )
GO

ALTER TABLE RECETAS ADD
CONSTRAINT UC_RECETAS_FOLIO UNIQUE( FOLIO )
GO

ALTER TABLE HOSPITALES ADD
CONSTRAINT UC_HOSPITALES_TELEFONO UNIQUE( HOSPTELEFONO )
GO

----------------------CHECK CONSTRAINT -- (VALIDACIONES)
ALTER TABLE MEDXRECETAS ADD
CONSTRAINT CC_MEDXRECETAS_DOSIS	CHECK(DOSIS > 0),  -- LA DOSIS DEBE SER MAYOR A 0
CONSTRAINT CC_MEDXRECETAS_CANTIDAD CHECK(CANTIDAD > 0) -- LA CANTIDAD DEBE SER MAYOR A 0
GO

ALTER TABLE CITAS ADD
CONSTRAINT CC_CITAS_FECHACAPTURA CHECK(FECHACAPTURA > 1-1-2021)  -- LA FECHA DE CAPTURA DEBE DE SER MAYOR A LA INDICADA
GO 

ALTER TABLE RECETAS ADD
CONSTRAINT CC_RECETAS_FECHA CHECK (RECFECHA > 1-1-2021)  -- 
GO

------------------INSERCIONES TABLA HOSPITALES
INSERT INTO HOSPITALES VALUES(111,'Hospital general','La lomita #3451',667249249);
GO
INSERT INTO HOSPITALES VALUES(112,'Hospital civil','Alvaro obregon #9824',667567535);
GO
INSERT INTO HOSPITALES VALUES(114,'Hospital de la mujer','USE #4524',667987489);
GO
INSERT INTO HOSPITALES VALUES(115,'ISSTE','	Enrique cabrera #1352',667039249);
GO
INSERT INTO HOSPITALES VALUES(117,'IMSS','La lomita #3451',667248293);
GO
-------------------INSERCIONES TABLA CONSULTORIOS
INSERT INTO CONSULTORIO VALUES(001,'Rehabilitacion',111);
GO
INSERT INTO CONSULTORIO VALUES(002,'Consulta dental',112);
GO
INSERT INTO CONSULTORIO VALUES(003,'Consulta cardiaca',114);
GO
INSERT INTO CONSULTORIO VALUES(004,'De sangre',115);
GO
INSERT INTO CONSULTORIO VALUES(005,'De receta medicas',117);
GO
-------------------INSERCIONES TABLA CITAS
INSERT INTO CITAS VALUES(123,'09/10/2022','09/30/2022',80,120,1.80,'Fiebre alta','Gripe',001,100,200);
GO
INSERT INTO CITAS VALUES(124,'09/10/2022','10/05/2022',60,130,1.70,'Diarrea','Deshidratacion',002,101,201);
GO
INSERT INTO CITAS VALUES(125,'09/10/2022','10/12/2022',77,140,1.75,'Tos seca','Infeccion en la garganta',003,102,202);
GO
INSERT INTO CITAS VALUES(126,'09/10/2022','10/19/2022',120,120,1.84,'Dolor de cabeza','Migraña',004,103,203);
GO
INSERT INTO CITAS VALUES(127,'09/10/2022','10/24/2022',45,160,1.55,'Dolor de cuerpo','Dengue',005,104,204);
GO
-------------------INSERCIONES TABLA RECETAS
INSERT INTO RECETAS VALUES(889,'07/15/2022',123)
GO
INSERT INTO RECETAS VALUES(890,'07/20/2022',124)
GO
INSERT INTO RECETAS VALUES(891,'07/30/2022',125)
GO
INSERT INTO RECETAS VALUES(892,'07/03/2022',126)
GO
INSERT INTO RECETAS VALUES(893,'07/01/2022',127)
GO
-------------------INSERCIONES TABLA MEDXRECETAS
INSERT INTO MEDXRECETAS VALUES(889,200,12,400);
GO
INSERT INTO MEDXRECETAS VALUES(890,201,13,200);
GO
INSERT INTO MEDXRECETAS VALUES(891,2021,14,300);
GO
INSERT INTO MEDXRECETAS VALUES(892,203,15,500);
GO
INSERT INTO MEDXRECETAS VALUES(893,204,51,100);
GO
-------------------INSERCIONES TABLA DOCTORES
INSERT INTO DOCTORES VALUES(100,'Joaquin','Guzman Loera',668193023);
GO
INSERT INTO DOCTORES VALUES(101,'Oscar','Beltran Heras',664519023);
GO
INSERT INTO DOCTORES VALUES(102,'Ana','Perez Sanchez',668134023);
GO
INSERT INTO DOCTORES VALUES(103,'Samuel','Urias Acosta',668193053);
GO
INSERT INTO DOCTORES VALUES(104,'Monica','Angulo Lopez',668193023);
GO
-------------------INSERCIONES TABLA PACIENTES
INSERT INTO PACIENTES VALUES(200,'Paco','Ramirez Obeso','Conquista 2 #8291',667289567,'paco43@hotmail.com');
GO
INSERT INTO PACIENTES VALUES(201,'Maria','Cazares Ayon','Prados del sol #6789',667356743,'Mari02@hotmail.com');
GO
INSERT INTO PACIENTES VALUES(202,'Jesus','Gastelum Rios','Huizaches #4532',667405840,'jesusAd1@hotmail.com');
GO
INSERT INTO PACIENTES VALUES(203,'Sebastian','Aldama Rendon','Tres rios 2 #5213',667920482,'sebass29@hotmail.com');
GO
INSERT INTO PACIENTES VALUES(204,'Susana','Garibaldi Gomez','Santa Elena #1232',667289597,'susiG34@hotmail.com');
GO
-------------------INSERCIONES TABLA MEDICAMENTOS
INSERT INTO MEDICAMENTOS VALUES (200,'Paracetamol','Alivia molestia cuerpo','Fuerte',900);
GO
INSERT INTO MEDICAMENTOS VALUES (201,'Genoprasol','Dolo de estomago','Fuerte',901);
GO
INSERT INTO MEDICAMENTOS VALUES (202,'Aspirina','Dolor de cabeza','Fuerte',902);
GO
INSERT INTO MEDICAMENTOS VALUES (203,'Naproxel','Molestia en general','Fuerte',903);
GO
INSERT INTO MEDICAMENTOS VALUES (204,'Insulina','Nivel de azucar controlado','Fuerte',904);
GO
-----------------INSERCIONES TABLA DE ESPECIALIDADES
INSERT INTO ESPECIALIDADES VALUES (001,'Cirugia');
GO
INSERT INTO ESPECIALIDADES VALUES (002,'Pediatria');
GO
INSERT INTO ESPECIALIDADES VALUES (003,'Cardiologia');
GO
INSERT INTO ESPECIALIDADES VALUES (004,'Dermatologia');
GO
INSERT INTO ESPECIALIDADES VALUES (005,'Psiquiatrica');
GO
-----------------INSERCIONES TABLA DE ESPXDOC
INSERT INTO ESPXDOC VALUES(001,100);
GO
INSERT INTO ESPXDOC VALUES(002,101);
GO
INSERT INTO ESPXDOC VALUES(003,102);
GO
INSERT INTO ESPXDOC VALUES(004,103);
GO
INSERT INTO ESPXDOC VALUES(005,104);
GO
----------------INSERCIONES TABLA DE LABORATORIO
INSERT INTO LABORATORIOS VALUES (900,'Quimica','Mezcla y reacciones','Infonavit solidaridad #452');
GO
INSERT INTO LABORATORIOS VALUES (901,'Fisica','Calculos y teorias','Santa Fe #232');
GO
INSERT INTO LABORATORIOS VALUES (902,'Dinamica','Mecanismo y motores','Zona Centro #123');
GO
INSERT INTO LABORATORIOS VALUES (903,'Industrial','Refracciones y diseño','4 de Marzo #981');
GO
INSERT INTO LABORATORIOS VALUES (904,'Inteligencia Artificial','Desarrollo tecnologico','Villas del cedro #2452');
GO